<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>R for Reproducible Scientific Analysis: Control Flow--if() and for()</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav software"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/07b-control-flow.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      R for Reproducible Scientific Analysis
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            R for Reproducible Scientific Analysis
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R for Reproducible Scientific Analysis
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 34%" class="percentage">
    34%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 34%" aria-valuenow="34" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/07b-control-flow.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-rstudio-intro.html">1. Introduction to R and RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-project-intro.html">2. Project Management With RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-seeking-help.html">3. Seeking Help</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-data-structures-part1.html">4. Data Structures</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-data-structures-part2.html">5. Exploring Data Frames</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-data-subsetting.html">6. Subsetting Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        7. Control Flow--if() and for()
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#intro">Intro</a></li>
<li><a href="#establishing-our-problem">Establishing our problem</a></li>
<li><a href="#if-statements">If statements</a></li>
<li><a href="#for-loops-to-repeat-operations">For loops to repeat operations</a></li>
<li><a href="#solving-our-annoying-data-challenge">Solving our annoying data challenge</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-plot-ggplot2.html">8. Creating Publication-Quality Graphics with ggplot2</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-vectorization.html">9. Vectorization</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-functions.html">10. Functions Explained</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-writing-data.html">11. Writing Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-plyr.html">12. Splitting and Combining Data Frames with plyr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13b-dplyr.html">13. Data Frame Manipulation with dplyr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14b-tidyr.html">14. Pivoting using tidyr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-knitr-markdown.html">15. Producing Reports With knitr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="16-wrap-up.html">16. Writing Good Software</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-data-subsetting.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-plot-ggplot2.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-data-subsetting.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Subsetting Data
        </a>
        <a class="chapter-link float-end" href="08-plot-ggplot2.html" rel="next">
          Next: Creating... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Control Flow--if() and for()</h1>
        <p>Last updated on 2024-02-02 |
        
        <a href="https://github.com/swcarpentry/r-novice-gapminder/edit/main/episodes/07b-control-flow.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can I get R to assess a situation and respond differently to
different circumstances?</li>
<li>How can I get R to repeat the same or similar operations instead of
copy-pasting the same code over and over?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Recognize when and how to make the COMPUTER do your tedious,
complex, and repetitive data tasks.</li>
<li>Practice indexing and logical tests in the context of solving a
frustrating data management problem.</li>
<li>Demystify the structure and syntax of the dreaded “for loop.”</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="intro"><h2 class="section-heading">Intro<a class="anchor" aria-label="anchor" href="#intro"></a>
</h2>
<hr class="half-width"><p>In this unit, we’re going to start by creating a <em>fake</em> and
<em>annoying</em> data management problem that we will <em>then</em> get
to solve <strong>easily</strong> using two powerful programming tools.
Let’s create that annoying problem first.</p>
<p>The basic idea is that we will need to find and respond to a complex
pattern in our data–something we need to do <em>all the time</em> when
working with real data sets! So, we’ll need to generate some complex
data first, which we will do using random sampling.</p>
<p>However, because it would be nice if we <em>all</em> had the
<em>same</em> random data to work with (so we all get the same
answers!), we can first use a little “cheat code.” In R, you can make
random things “predictably random” by first setting a specific
<em>seed</em> for R’s random number generator to use. Doing so will
ensure we all get the same “answers,” so don’t skip this step!</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> <span class="co">#Ensures that all random processes will "start from the same place."</span></span></code></pre>
</div>
<p>Next, let’s begin by making a giant random <em>vector</em> full of
values. To do this, we can use the <code>sample()</code> function. Here,
we’ll provide <code>sample()</code> with three inputs: an
<code>x</code>, a <code>size</code>, and a <code>replace</code>. See if
you can guess what each input does!</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rand_vec1</span> <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<p>We can see the first 100 values of <code>rand_vec1</code> by using
indexing.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rand_vec1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">]</span> <span class="co">#Extract values 1 thru 100.</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] 0 0 0 1 0 1 1 1 0 0 1 1 1 0 1 0 1 0 0 0 0 1 0 0 0 0 1 1 0 1 0 1 0 1 1 0 0
 [38] 0 0 1 0 1 1 0 0 0 0 1 0 0 1 0 0 0 0 1 1 0 1 0 0 1 1 0 0 1 0 0 0 0 1 0 0 0
 [75] 0 1 1 0 1 1 1 1 0 1 1 1 0 0 1 0 1 1 0 1 1 0 0 1 0 0</code></pre>
</div>
<p>Here, we see that we drew randomly from the values 0 and 1
(<code>x</code> is the “pool” of values we draw from) 10,000 times
(<code>size</code> is the number of draws to do) with replacement
(<code>replace = TRUE</code>).</p>
<p>Let’s do the exact same thing again to create a second vector,
<code>rand_vec2</code>, that will be randomly different from the first
one we made.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rand_vec2</span> <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<p>We’ll then create a <em>data frame</em> (table) with these two random
vectors as columns, which we’ll call <code>a</code> and <code>b</code>
for simplicity.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset1</span> <span class="op">=</span> <span class="fu">data.frame</span><span class="op">(</span>a <span class="op">=</span> <span class="va">rand_vec1</span>, </span>
<span>                      b <span class="op">=</span> <span class="va">rand_vec2</span><span class="op">)</span></span></code></pre>
</div>
</section><section id="establishing-our-problem"><h2 class="section-heading">Establishing our problem<a class="anchor" aria-label="anchor" href="#establishing-our-problem"></a>
</h2>
<hr class="half-width"><p>Ok, now that we’ve created our “fake, random data set,” let me
explain the annoying data problem involving it that we’ll need to
solve.</p>
<p>We have two columns, <code>a</code> and <code>b</code>. Imagine that,
for our analyses, we need to create a new, third column, <code>c</code>,
that equals <code>0</code> except whenever the current value in column
<code>a</code> is equal to <code>1</code> and ALSO the <em>previous</em>
value in column <code>b</code> is also equal to <code>1</code>. All
other times, <code>c</code> should equal <code>0</code> though.</p>
<p>For example, in the sample table below, the value of <code>c</code>
in row 2 would be 1 (column <code>a</code>’s second value is 1 and
column <code>b</code>’s first value is also 1) but 0 in row 3 (because
<code>a</code>’s value is 0) and row 4 (because <code>b</code>’s
previous value is 0):</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a b
1 0 1
2 1 1
3 0 0
4 1 1</code></pre>
</div>
<p>What an <strong>annoying</strong> pattern to have to spot, right?
Finding patterns like these is something we often have to do when
analyzing real-world data. Imagine trying to hunt for this pattern
<em>by eye</em>, perhaps in Microsoft Excel, by going row by row. It’d
be <strong>torture</strong>, it’d take <em>forever</em>, and we’d
probably make a lot of mistakes.</p>
<p>Instead, we can “teach” R how to find this pattern for us! To do
that, though, we need to harness two powerful functions that control how
R “goes with the flow” and makes “decisions”: <code>if()</code> and
<code>for()</code>.</p>
</section><section id="if-statements"><h2 class="section-heading">If statements<a class="anchor" aria-label="anchor" href="#if-statements"></a>
</h2>
<hr class="half-width"><p>We’ll start with <code>if()</code> because it’s the simpler of the
two functions to learn. Even still, if you are not an experienced
programmer, <code>if()</code> will probably feel very “programming-y” to
you at first.</p>
<p>The good news is that you have probably experienced an “if statement”
in your real life! For example:</p>
<figure><img src="fig/thistalltoride.jpeg" alt="photo of amusement park barrier to entrance" class="figure mx-auto d-block"><figcaption>If you’ve been to an amusement park, you’ve probably
seen a sign like this one before. It may not seem like it at first, but
this sign is an “if statement!”</figcaption></figure><p>In life, we often encounter “rules.” If we pass or satisfy the rule,
we get to do stuff (like ride a roller coaster) and, if we don’t pass or
satisfy the rule, we have to do nothing.</p>
<p><code>if()</code> works the exact same way! We provide it a “rule” as
an input and then also “stuff” (code) that will execute if and only if
that “rule” passes.</p>
<p>To see what I mean, let’s create an object called <code>x</code> and
set its value to a known value of <code>10</code>.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">=</span> <span class="fl">10</span> </span></code></pre>
</div>
<p>Now, let’s write an <code>if()</code> statement involving
<code>x</code>. In <code>if()</code>’s parentheses, we provide a
<em>logical test</em>, which consists of an object who’s value we will
check (here, that’s <code>x</code>), a <em>logical operator</em> (I’ll
use <code>&lt;</code> or “less than” below), and a “benchmark” to check
that value against (below, I use the value <code>20</code>).</p>
<p>Then, in <code>if()</code>’s <em>curly braces</em>, we put code that
should only execute if the <em>logical test</em> passes.</p>
<p>Putting all this together in the example below, I check to see if the
value of <code>x</code> is less than <code>20</code>, which we know that
it is, so the code in the <em>curly braces</em> will run.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"Yes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Yes"</code></pre>
</div>
<p>What happens if the <em>logical test</em> fails instead? To see,
change the <em>logical operator</em> to “greater than”
(<code>&gt;</code>) instead. What do you get, and why?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"Yes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge1"></a>
</h3>
<div class="callout-content">
<p>As we’ve used it so far, <code>if()</code> only gets R to do
something if the <em>logical test</em> we’ve provided passes. What if
you wanted to do something either way (whether the test passes or
fails)–what could you do in this situation?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Your first temptation might be to put multiple <code>if()</code>s in
a row to catch all possible outcomes, such as by using the two
<code>if()</code> calls we’ve already written back to back to catch when
<code>x</code> is greater than 20 and when it’s less than 20. This
works, but if there are only two possible outcomes, there’s an easier
way…</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="ifelse-statements">If/else statements<a class="anchor" aria-label="anchor" href="#ifelse-statements"></a></h3>
<p><code>if()</code> has a companion function, <code>else</code>, that
you can pair it with so that something happens when the <em>logical
test</em> passes and something <em>different</em> happens when the
<em>logical test</em> fails. Here’s what this looks like:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"Yes"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"No"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "No"</code></pre>
</div>
<p>In the example above, <code>"No"</code> gets printed. Why? Well, the
<em>logical test</em> failed, so R skipped over the operations given to
<code>if()</code> and instead executed the operations given to
<code>else</code>.</p>
<p>Notice that <code>else</code> gets <em>curly braces</em> but not
parentheses. Why? Remember that <em>logical tests</em> must be
<strong>mutally exclusive</strong>, meaning they are either
<code>TRUE</code> (they pass) or <code>FALSE</code> (they fail). A
single <em>logical test</em> can yield either outcome, so the one
<em>logical test</em> we give to <code>if()</code> can serve as the
necessary input for both <code>if()</code> and <code>else</code>.</p>
<div id="callout1" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout<a class="anchor" aria-label="anchor" href="#callout1"></a>
</h3>
<div class="callout-content">
<p><strong>Important</strong>: This means that an <code>else</code> is
<em>fundamentally dependent</em> on the <code>if()</code> it goes with.
As a result, an <code>else</code> must always start on the same line as
its <code>if()</code> ends on. For example, the code below would trigger
an error:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(x <span class="sc">&gt;</span> <span class="dv">20</span>) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Yes"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> { </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"No"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
</div>
<p>This is an example of how line breaks do <em>occasionally</em> matter
in R.</p>
</div>
</div>
</div>
<p>For simplicity, we won’t show it here, but if you had a situation
where there were more than 2 possible outcomes and you wanted to do
something different in each one, you can stack <code>if()</code>s and
<code>else</code>s inside of each other to create as complex a “decision
tree” as you need to!</p>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge2"></a>
</h3>
<div class="callout-content">
<p>How does knowing <code>if()</code> help us solve our annoying data
problem involving columns <code>a</code> through <code>c</code> that we
set up earlier, do you think?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Recall that we want the value in column <code>c</code> to be equal to
<code>1</code> only <em>if</em> two specific conditions are met. So, we
can’t even talk about our data problem without using the word “if.”
That’s not an accident–<code>if()</code> will help us ensure that we do
the right thing whenever those conditions are met and something
<em>else</em> if they aren’t.</p>
</div>
</div>
</div>
</div>
<div id="challenge3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge3"></a>
</h3>
<div class="callout-content">
<p>Let’s practice trying to use <code>if()</code> and <code>else</code>
to start solving our data problem by using them to check to see what the
correct value for column <code>c</code> should be in row 2 of our data
set.</p>
<p>Write an if/else pair that checks if the <em>SECOND</em> value in
column <code>a</code> is equal to <code>1</code> (use <code>==</code> as
the <em>logical operator</em> to check for equality!) and the
<em>FIRST</em> value in column <code>b</code> is also equal to
<code>1</code>.</p>
<p>Inside your <em>curly braces</em>, make an object called
<code>c</code> and set its value to <code>1</code> if both conditions
are met and to <code>0</code> if not.</p>
<p>Hint: You can put two FULL <em>logical rules</em> inside of
<code>if()</code>’s parentheses and separate them with an
<code>&amp;</code> (“and”) if you want <code>if()</code> to check
against two rules instead of just one.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Here’s what this could look like:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">dataset1</span><span class="op">$</span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span></span>
<span>   <span class="va">dataset1</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">)</span> <span class="op">{</span> </span>
<span>  <span class="va">c</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">c</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>What happens when we run the code above–what does <code>c</code>
become? Let’s check:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print</span><span class="op">(</span><span class="va">c</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
<p>It became <code>0</code>. Is that what should have happened? Let’s
look at the first two rows of our data set to confirm that our code did
what we wanted it to do:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">]</span> <span class="co">#Rows 1 and 2, all columns</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a b
1 0 0
2 0 1</code></pre>
</div>
<p>Yes, <code>0</code> is the right value because <strong>both</strong>
conditions we were checking against were <code>FALSE</code> in this
case.</p>
<p>Nice! We can now have R perform this kind of check for us and it will
do it flawlessly <em>every single time</em>, unlike us humans who might
mess it up sometimes!</p>
</div>
</div>
</div>
</div>
</div>
</section><section id="for-loops-to-repeat-operations"><h2 class="section-heading">For loops to repeat operations<a class="anchor" aria-label="anchor" href="#for-loops-to-repeat-operations"></a>
</h2>
<hr class="half-width"><p>If you did the challenge above (at least view the answer before
continuing!), you saw that we can use <code>if()</code> and
<code>else</code> to check whether row 2 in our data set passes both of
our conditions for when to put a <code>1</code> in column
<code>c</code>.</p>
<p>…Now, we’d just need to do this same check for the 9998 remaining
rows, right? Get ready to copy-paste <em>a lot</em> of code!</p>
<p>…No, I’m just kidding! Let’s definitely <strong>not</strong> do it
that way. Instead, we should just get R to <strong>repeat</strong> this
check the rest of the times we need to do it. Fortunately, repeating
tasks is exactly what the <code>for()</code> function is for.</p>
<p>Again, if you don’t have a programming background, <code>for()</code>
will probably look very “programming-y” to you. However, once again, the
good news is that you have probably experienced a “real-life for loop”
at least once! For example:</p>
<figure><img src="fig/ticketsystem.jpeg" alt="photo of ticketing systems at delis and the DMV" class="figure mx-auto d-block"><figcaption>If you’ve ever been to a deli counter or the DMV,
you’ve probably seen a ticket system like this one. This is just a for
loop!</figcaption></figure><p>If you’ve been to a deli counter that uses a ticket system like the
one above, you probably already know how the system works:</p>
<ol style="list-style-type: decimal"><li><p>Everyone who wants some meat or cheese takes a ticket with a
unique number on it.</p></li>
<li><p>The worker behind the counter calls out the number of the next
ticket, putting that number up on a display board so everyone can see
which ticket we’re on.</p></li>
<li><p>The customer with that ticket number comes up to the counter and
places their order.</p></li>
<li><p>The worker then processes that order in <em>roughly</em> the same
way every time (gets the selection out, cuts it, places the slices in a
baggie, cleans the slicer, etc.).</p></li>
</ol><p>Then, the process repeats for the next customer and ticket number
until all the tickets are gone. This process of repeating the same set
of operations over and over again (even if the specifics actually change
somewhat each time!) all while keeping track of which “repeat” we’re on
is exactly how <code>for()</code> works too!</p>
<p>Let’s write out a “fake” <code>for()</code> call so we can see the
basic parts and how they match up with the story I just told:</p>
<blockquote>
<p>for(current_ticket in pool_of_ticket_values) {<br>
–code for R to repeat for every ticket–<br>
}</p>
</blockquote>
<p>Inside the parentheses above, we first have an object holding the
“current ticket number” that we’re on called
<code>current_ticket</code>. That object is exactly like the digital
“Now serving ticket #X” sign in our deli counter example.</p>
<p>Then, we have a connector function called <code>in</code>, which we
can safely ignore (as long as we don’t forget to include it!).</p>
<p>Then, we have another object called
<code>pool_of_ticket_values</code> that holds all possible ticket values
we will need to go through, one by one, until we are “done” serving our
customers.</p>
<p>Then, just as with <code>if()</code>, <code>for()</code> has
<em>curly braces</em>. Inside these, we have code that will run, from
top to bottom, the same exact way for each ticket value we draw from our
pool. In our story, these are the steps the worker goes through for each
customer. Each customer might want slightly different things, so the
“inputs” for these operations may change, but what gets done and when is
roughly the same every time.</p>
<p>Said differently, each time the operations inside the <em>curly
braces</em> begin, <code>current_ticket</code> will first become equal
to the next available value in the <code>pool_of_ticket_values</code>.
Then, all the operations inside the <em>curly braces</em> will run once
from top to bottom. That process will then repeat (or “loop”) until the
ticket pool is empty and there are no more new values to set
<code>current_ticket</code> equal to.</p>
<p>We can demonstrate this order of events using a working (albeit dumb)
example <em>for loop</em>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">ticket</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span></span>
<span>    <span class="fu">paste0</span><span class="op">(</span><span class="st">"Now serving ticket number: "</span>,</span>
<span>           <span class="va">ticket</span><span class="op">)</span></span>
<span>   <span class="op">)</span> </span>
<span>  <span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Now serving ticket number: 1"
[1] "Now serving ticket number: 2"
[1] "Now serving ticket number: 3"
[1] "Now serving ticket number: 4"
[1] "Now serving ticket number: 5"
[1] "Now serving ticket number: 6"
[1] "Now serving ticket number: 7"
[1] "Now serving ticket number: 8"
[1] "Now serving ticket number: 9"
[1] "Now serving ticket number: 10"</code></pre>
</div>
<p>What’s going on here? R is printing the message “Now serving ticket
number: X” 10 times, with X changing each time. How did this happen?</p>
<p>R starts to execute this code by first taking the first value in our
pool (which here is <code>1</code>), and makes <code>ticket</code> equal
to that value. It then executes the code in the <em>curly braces</em>,
which tells it to print a message.</p>
<p>However, specifically, we’ve asked it to use the current value of
<code>ticket</code> inside our message, like we’re having it read off
the “digital display board” to adjust its behavior depending on what
ticket we’re currently on. <strong>The fact that we can use
<code>ticket</code> inside our operations to “do work” is
important!</strong></p>
<p>The process then repeats until our pool is empty, which in this case
happens after we’ve used the last value in our pool, which is
<code>10</code> here.</p>
<div id="challenge4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge4"></a>
</h3>
<div class="callout-content">
<p>How does knowing <code>for()</code> help us solve our annoying data
challenge, do you think?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>To fill out all 10,000 rows of our <code>c</code> column, we need to
do the same check <em>for each row</em>. Again, we can’t even discuss
our problem without using the word “for.” That’s not an accident! We can
use <code>for()</code> to repeat the check for every row and respond
accordingly even as the exact “inputs” change from one row to the
next.</p>
</div>
</div>
</div>
</div>
</section><section id="solving-our-annoying-data-challenge"><h2 class="section-heading">Solving our annoying data challenge<a class="anchor" aria-label="anchor" href="#solving-our-annoying-data-challenge"></a>
</h2>
<hr class="half-width"><p>We’re <em>nearly</em> ready to solve our frustrating data management
challenge, but we just need to do a couple of preparation steps
first.</p>
<p>Since we’re going to need a <code>c</code> column in our data set but
there isn’t one yet, let’s make one and fill it with <code>NA</code>
values to start with (since we don’t yet know what those values should
be).</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset1</span><span class="op">$</span><span class="va">c</span> <span class="op">=</span> <span class="cn">NA</span></span></code></pre>
</div>
<p>The above command adds a new column called <code>c</code> to our data
set (if our data set already had a column called <code>c</code>, it
would replace that column instead). It then fills that column with
<code>NA</code>.</p>
<p>This step is called “pre-allocating.” We’re preparing a space for all
the new values we’re about to place in that <code>c</code> column! It’s
not strictly necessary to pre-allocate space for new stuff you want to
create using a <em>for loop</em>, but <em>for loops</em> can get
<strong>really</strong> slow if you <em>don’t</em> do it!</p>
<p>We can now build our <em>for loop</em>! To start, we have to pick a
name for our “current ticket” object because, as we saw in our earlier
example, it can be called whatever we want. I prefer names that have
meaning in the context of what I’m trying to accomplish. Here, because
we are repeating operations for each new <strong>row</strong> we want to
check, I will helpfully name this object <code>current_row</code>.</p>
<p>Then, I place <code>in</code> and then I need a pool of values that
will ensure the loop repeats the proper number of times. Because our
data set is 10,000 rows long, because we want to perform our check for
every row, and because the first row can <em>never</em> pass our tests
(there is no previous value for column <code>b</code> for row 1), we can
make our pool of the values ranging from <code>2</code> up to
<code>10000</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">current_row</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">10000</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co">#Operations will go here...</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Inside the <em>curly braces</em>, I now just need to tell R to check
the appropriate values in columns <code>a</code> and <code>b</code> and
set the appropriate values in column <code>c</code> accordingly.</p>
<p>We already wrote <em>more or less</em> the code needed to perform
this check in an earlier challenge:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">dataset1</span><span class="op">$</span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span></span>
<span>   <span class="va">dataset2</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">)</span> <span class="op">{</span> </span>
<span>  <span class="va">c</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">c</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>The only problem is that the above code only works to check the 2nd
row of column <code>a</code> and the 1st row of column <code>b</code>.
In other words, it’s too specific–we’ll need it to be more generic here
so that it can work for whatever row of our data set we’re currently
on.</p>
<p>Here’s where we can take advantage of the <code>current_row</code>
object:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">dataset1</span><span class="op">$</span><span class="va">a</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span></span>
<span>   <span class="va">dataset1</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="va">current_row</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">)</span> <span class="op">{</span> </span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">c</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">c</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Now, we’re telling R “<strong>whatever the current row is</strong>,
check the appropriate values and set the value of <code>c</code> in that
row accordingly.” As R works through the pool of values in
<code>2:10000</code>, <code>current_row</code> will become those values,
one at a time, so it will start out being <code>2</code>, then
<code>3</code>, and so on. So, we can use that to point R to a new row
each time through the loop!</p>
<div id="callout2" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout<a class="anchor" aria-label="anchor" href="#callout2"></a>
</h3>
<div class="callout-content">
<p>Notice we can also do math inside <em>square brackets</em> to access
the <em>previous</em> value in column <code>b</code>–that’s a handy
trick!</p>
</div>
</div>
</div>
<p>If we put all this together, this is our final <em>for loop</em>:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">current_row</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">10000</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="va">dataset1</span><span class="op">$</span><span class="va">a</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span></span>
<span>   <span class="va">dataset1</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="va">current_row</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">)</span> <span class="op">{</span> </span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">c</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">c</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span> <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>And now, the all-important question: Did it work? Let’s examine the
first 20 rows–see if you can determine whether column <code>c</code>
looks as it should or not:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   a b  c
1  0 0 NA
2  0 1  0
3  0 0  0
4  1 1  0
5  0 1  0
6  1 1  1
7  1 0  1
8  1 1  0
9  0 1  0
10 0 0  0
11 1 0  0
12 1 0  0
13 1 1  0
14 0 1  0
15 1 1  1
16 0 0  0
17 1 1  0
18 0 1  0
19 0 0  0
20 0 0  0</code></pre>
</div>
<p>The short answer: Yes, it does! This means we just had R do literally
<strong>hours</strong> of <strong>torturous</strong> work in just
<em>seconds</em>, flawlessly, with just eight lines of code! You’ll
<strong>never</strong> have to do something like this in Excel “by eye”
ever again!</p>
<div id="challenge5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge5"></a>
</h3>
<div class="callout-content">
<p>Add a fourth column, <code>d</code>, to our data set. Set
<code>d</code> equal to <code>1</code> whenever the current value of
<strong>either</strong> column <code>a</code> <strong>or</strong> column
<code>b</code> is <code>0</code> and make <code>d</code> equal to
<code>0</code> all other times. Hint: If you want to check to see if one
<em>logical test</em> <strong>or</strong> another passes, use
<code>|</code> (“or”) instead of <code>&amp;</code> (“and”) to connect
the two tests.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Here’s one valid way to do this, though there are others! Don’t
forget to preallocate column <code>d</code> first!</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset1</span><span class="op">$</span><span class="va">d</span> <span class="op">=</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">current_row</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10000</span><span class="op">)</span> <span class="op">{</span> <span class="co">#We can check row 1 here if we want to!</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="va">dataset1</span><span class="op">$</span><span class="va">a</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">|</span> <span class="co">#Note the use of the or operator, |.</span></span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">)</span> <span class="op">{</span> <span class="co">#No need to use math in the square brackets this time.</span></span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">d</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>     <span class="va">dataset1</span><span class="op">$</span><span class="va">d</span><span class="op">[</span><span class="va">current_row</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span> <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Use <code>if</code> and <code>else</code> to have R make choices on
the fly for you with respect to what operations it should do.</li>
<li>Use <code>for</code> to repeat operations many times.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-data-subsetting.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-plot-ggplot2.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-data-subsetting.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Subsetting Data
        </a>
        <a class="chapter-link float-end" href="08-plot-ggplot2.html" rel="next">
          Next: Creating... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/swcarpentry/r-novice-gapminder/edit/main/episodes/07b-control-flow.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/swcarpentry/r-novice-gapminder/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/r-novice-gapminder/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/r-novice-gapminder/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.2" class="external-link">sandpaper (0.16.2)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.3" class="external-link">pegboard (0.7.3)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.1" class="external-link">varnish (1.0.1)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/r-novice-gapminder/07b-control-flow.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Control Flow--if() and for()",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/r-novice-gapminder/07b-control-flow.html",
  "identifier": "https://swcarpentry.github.io/r-novice-gapminder/07b-control-flow.html",
  "dateCreated": "2015-04-18",
  "dateModified": "2024-02-02",
  "datePublished": "2024-02-20"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

