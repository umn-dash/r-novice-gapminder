<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>R for Reproducible Scientific Analysis: Pivoting using tidyr</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="../assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>
      
      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../14b-tidyr.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="../assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      R for Reproducible Scientific Analysis
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            R for Reproducible Scientific Analysis
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R for Reproducible Scientific Analysis
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 82%" class="percentage">
    82%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 82%" aria-valuenow="82" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../14b-tidyr.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-rstudio-intro.html">1. Introduction to R and RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-project-intro.html">2. Project Management With RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-seeking-help.html">3. Seeking Help</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-data-structures-part1.html">4. Data Structures</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-data-structures-part2.html">5. Exploring Data Frames</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-data-subsetting.html">6. Subsetting Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07b-control-flow.html">7. Control Flow--if() and for()</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-plot-ggplot2.html">8. Creating Publication-Quality Graphics with ggplot2</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-vectorization.html">9. Vectorization</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-functions.html">10. Functions Explained</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-writing-data.html">11. Writing Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="13b-dplyr.html">12. Data Frame Manipulation with dplyr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        13. Pivoting using tidyr
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#preparation-and-setup">Preparation and setup</a></li>
<li><a href="#minding-the-gapminder">Minding the Gapminder</a></li>
<li><a href="#pivot_longer">PIVOT_LONGER</a></li>
<li><a href="#pivot_wider">PIVOT_WIDER</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-knitr-markdown.html">14. Producing Reports With knitr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-wrap-up.html">15. Writing Good Software</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/13b-dplyr.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/14-knitr-markdown.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/13b-dplyr.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Data Frame
        </a>
        <a class="chapter-link float-end" href="../instructor/14-knitr-markdown.html" rel="next">
          Next: Producing Reports... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Pivoting using tidyr</h1>
        <p>Last updated on 2024-06-20 |
        
        <a href="https://github.com/swcarpentry/r-novice-gapminder/edit/main/episodes/14b-tidyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>
<em>How</em> am I storing data in my data sets?</li>
<li>How does R tend to expect me to store my data?</li>
<li>How can I convert (or <em>pivot</em>) my data from one form to
another?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Distinguish between “long” and “wide” formats (and “in-between”
formats) for storing data in a table.</li>
<li>Recognize and explain the benefits and drawbacks of storing data in
each format.</li>
<li>Use the <code>pivot</code> functions in the <code>tidyr</code>
package to convert data from one format to another.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="introduction"><h2 class="section-heading">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width"><p><strong>Important</strong>: There is no one universal, “right” way to
store data in a table! There are many advantages and disadvantages to
each way and, in some ways, so long as your organizational system
follows good data science storage conventions, is consistent, and works
for you and your team, then you’re probably doing it “right.”</p>
<p>That said, from a <em>computing</em> standpoint, there are two broad
ways to think about how data are stored in a table–in “wide” format or
in “long” format:</p>
<figure><img src="https://www.statology.org/wp-content/uploads/2021/12/wideLong1-1.png" alt="When data are in a wide format (left-hand side above), groups within the data (such as teams) have their own rows, and everything we know about each group (such as stats) is listed in different columns in that group’s row. When data are in long format (right-hand side above), each individual row belongs to a single observation, i.e one datum (such as one particular record of one statistic) and columns instead hold information about what groups each statistic belongs to. Same data, different organizations!" class="figure mx-auto d-block"><div class="figcaption">When data are in a wide format (left-hand side
above), <em>groups</em> within the data (such as teams) have their own
rows, and everything we know about each group (such as stats) is listed
in different columns in that group’s row. When data are in long format
(right-hand side above), each individual row belongs to a <em>single
observation</em>, i.e one datum (such as one particular record of one
statistic) and columns instead hold information about what groups each
statistic belongs to. Same data, different organizations!</div>
</figure><p>In “wide” format, each row is usually a grouping, site, individual,
etc. for which multiple observations are recorded, and each column is
everything you know about that entity, perhaps at several different time
points.</p>
<p>In “long” format, each row is a single observation (even if you have
several observations per entity), and the columns serve to clarify which
entity each observations belongs to.</p>
<p>Notice that, regardless, the <em>exact same information</em> is being
stored in the table–it’s just <em>arrayed</em> differently!</p>
<p>This is actually a spectrum–data can be organized in a <em>super</em>
long format, a <em>super</em> wide format, or somewhere in between (if
the data set has enough complexity to allow it)!</p>
<p>Also, when I say “long” and “wide,” I don’t mean in the
<em>physical</em> sense of how much data you’re storing. Obviously, if
you have a lot of data, you’re going to have a lot of rows and/or
columns potentially, so your data set might <em>look</em> “long” even
though it’s <em>organized</em> in a “wide” format.</p>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge1"></a>
</h3>
<div class="callout-content">
<p><strong>Important</strong>: One consequence of data organization is
that it influences the ease (or difficulty!) of using a programming
language like R to manipulate your data.</p>
<p>Consider: How would you use <code>dplyr</code>’s
<code>mutate()</code> function to calculate a “points per rebound” value
for each team using the “wide” format data set shown above? How about
for the “long” format data set?</p>
<p>Then, consider: How would you use <code>dplyr</code>’s
<code>summarize()</code> function to get an average number of assists
across all teams using the “wide” format data set shown above? How about
the “long” format data set?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>With the data in “wide” format, using <code>mutate()</code> to
calculate “points per rebound” for each team would be easy because the
two values for each team (<code>Points</code> and <code>Rebounds</code>)
are in the same row. So, we’d do something like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>pts_per_rebound <span class="op">=</span> <span class="va">Points</span><span class="op">/</span><span class="va">Rebounds</span><span class="op">)</span></span></code></pre>
</div>
<p>However, with the data in “long” format, it’s not at all obvious how
(or even if) one could use <code>mutate()</code> to get what we want.
The numbers we’re trying to slam together are in different rows now.
This demonstrates that, in some ways, <code>mutate()</code> is a
“rowwise” tool–its designed for operations that leverage data stored
more “widely.”</p>
<p>Similarly, with the data in “wide” format, using
<code>summarize()</code> to calculate an average number of
<code>Assists</code> across all teams would be easy because all the
numbers we’re trying to smash together are in the same column. So, we’d
do something like this:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_assists <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">Assists</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Yes, you can use <code>summarize()</code> without using
<code>group_by()</code> if you have no groups to group by!</p>
<p>However, once again, the “long” format version presents
difficulties–there are numbers in the <code>Value</code> column we’d
need to avoid here to calculate our average. So, it’d require us to use
<code>filter()</code> first to remove these:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">Variable</span> <span class="op">==</span> <span class="va">Assists</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co">#Notice I have to filter by the Variable column...</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_assists <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span> <span class="co">#...But take the mean of the Value column.</span></span></code></pre>
</div>
<p>So, <code>summarize()</code> <em>seems</em> like a tool also designed
for “wide” format data, but that’s only because our wide-format data
have <em>already</em> been grouped by team. In fact,
<code>group_by()</code> and <code>summarize()</code> are best thought of
as tools designed to work best with “long” format data because we need
to be able to easily sub-divide our data into groups to then be able to
summarize effectively and long formats have more columns for “grouping
variables.”</p>
<p>This whole exercise is designed to show that while, to <em>some</em>
extent, data organization is “personal preference,” it also has
implications for how we manipulate our data (and how easy or hard it
will be to do so).</p>
</div>
</div>
</div>
</div>
<p>While this is perhaps over-generalizing, I would say that
<strong>humans tend to prefer reading and recording data in “wider”
formats</strong>. Notice that, when we report data in tables or record
data on data sheets, we tend to do so across rows rather than down
columns. Recording data in long format, in particular, tends to feel
tedious because it requires us to fill out “grouping variable” columns
many times with the same information.</p>
<p>However, <strong>computers tend to be designed to “prefer”
manipulating data in “longer” formats</strong> (regardless of what the
previous example may have led you to believe!). Computers don’t “see”
natural groupings in data like humans can, so they count on having
columns that clarify these groups (like <code>continent</code> and
<code>country</code> do in the gapminder dataset), and those types of
columns only exist in “longer” formats. In particular, many
<code>dplyr</code> operations will actually be easier if your data are
in “long” format, and <code>ggplot2</code> <em>especially</em> expects
“long” format to render plots with various groups correctly.</p>
<p>This may seem like a dilemma–we’re torn between how <em>we’d</em>
prefer the data to look and how <em>R</em> would prefer them to look.
But, remember, it’s all the same data, just arranged differently. So, it
seems like it’d be possible to “reshape” our data to suit both needs.
That’s, in part, what the <code>tidyr</code> package’s functions
<code>pivot_longer()</code> and <code>pivot_wider()</code> are for.</p>
</section><section id="preparation-and-setup"><h2 class="section-heading">Preparation and setup<a class="anchor" aria-label="anchor" href="#preparation-and-setup"></a>
</h2>
<hr class="half-width"><p>Note: This lesson uses the <strong>gapminder data set</strong>. This
data set can be downloaded <a href="https://drive.google.com/file/d/1sBkIJlC_6fImNZhyV0XfsllyUD-hSmoS/view?usp=sharing" class="external-link">here</a>.
Make sure to load the data set into your global environment before
continuing.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap</span> <span class="op">=</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder_data.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<p>Also, this lesson will revolve around use of the optional “add-on”
package <code>tidyr</code>. <code>tidyr</code> is a package in the
“tidyverse”–an array of useful tools that are designed to look similar
and work well together and that make R much more powerful to use but
also a lot different than “Base R.” Everything we do in this lesson can
be done in “Base R” instead, but it won’t (typically) be as efficient,
easy, or clear!</p>
<p><code>tidyr</code>, like many add-on packages, is
<strong>not</strong> installed with R. So, we must install it before we
can use it:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyr"</span><span class="op">)</span> <span class="co">#Only run once!</span></span></code></pre>
</div>
<p>You only need to install a package once, so there’s no need to run
the above command more than once. However, packages are updated
occasionally. When updates are available, you can re-install new
versions using the same <code>install.packages()</code> function.</p>
<p>Once a package is installed, it still isn’t “turned on” by default.
So, to turn on <code>tidyr</code> so that we can access its unique
features, we use the <code>library()</code> function:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyr</span><span class="op">)</span></span></code></pre>
</div>
<p>The above command must be run every time you start up a new session
of R and want access to <code>tidyr</code>’s features!</p>
<p>We’ll also need the <code>dplyr</code> package here so that we can
use pipes. See the <code>dplyr</code> lesson for details!</p>
</section><section id="minding-the-gapminder"><h2 class="section-heading">Minding the Gapminder<a class="anchor" aria-label="anchor" href="#minding-the-gapminder"></a>
</h2>
<hr class="half-width"><div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge2"></a>
</h3>
<div class="callout-content">
<p>Let’s look at the gapminder data set once more to remind ourselves of
its structure and contents:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gap</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007
4 Afghanistan 1967 11537966      Asia  34.020  836.1971
5 Afghanistan 1972 13079460      Asia  36.088  739.9811
6 Afghanistan 1977 14880372      Asia  38.438  786.1134</code></pre>
</div>
<p>Consider: Is the gapminder data set in “long” format or “wide”
format? Why do you say that?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Sorry, this is <em>sort of</em> a trick question because the right
answer is “both” (or “neither”).</p>
<p>On the one hand, the gapminder data set is not <em>as</em> long as it
<em>could</em> be. For example, right now, there are three columns
containing numeric data (<code>pop</code>, <code>lifeExp</code>, and
<code>gdpPercap</code>). We <em>could</em> instead have a single
<code>Value</code> column to hold these data, as we had with our fake
sports data earlier, and a second column that lists what kind of
<code>Value</code> each row represents.</p>
<p>On the other hand, the gapminder data set is also not <em>as</em>
wide as it <em>could</em> be either. For example, right now, there are
three “grouping variables” (<code>country</code>, <code>year</code>, and
<code>continent</code>). We <em>could</em> instead have a single row per
<code>country</code> and have separate columns for the data from each
year (i.e., <code>pop1952</code>, <code>pop1957</code>,
<code>pop1962</code>, etc.).</p>
<p>So, “data orientation” is a spectrum, and the gapminder data set
exists sort of in the middle of it! Hold onto this idea–in the rest of
this lesson, we’re going to see how to <strong>make</strong> those
longer and wider versions we just imagined!</p>
</div>
</div>
</div>
</div>
</section><section id="pivot_longer"><h2 class="section-heading">PIVOT_LONGER<a class="anchor" aria-label="anchor" href="#pivot_longer"></a>
</h2>
<hr class="half-width"><p>We’ll begin by seeing how to make our data even longer than it is now
by combining all the values in the <code>pop</code>,
<code>lifeExp</code>, and <code>gdpPercap</code> columns into a single
column called <code>Value</code>. We’ll then add a second column
(officially called a “key” column) that clarifies which
<code>Statistic</code> is being reported in the <code>Value</code>
column in that row.</p>
<p>The <code>tidyr</code> verb that corresponds with this goal is
<code>pivot_longer()</code>. As with most <code>dplyr</code> verbs (and
<code>tidyverse</code> verbs in general!), the first input to
<code>pivot_longer()</code> is <strong>always</strong> the data frame
you are trying to reshape (or “pivot”). In this case, that will be our
gapminder data set.</p>
<p>After providing our data set, we will provide three more inputs in
this particular case:</p>
<ol style="list-style-type: decimal"><li><p>The columns we are eliminating and collapsing into a single
column. Here, that will be <code>pop</code>, <code>lifeExp</code>, and
<code>gdpPercap</code>. We’ll provide these inputs to the
<code>cols</code> <em>parameter</em>.</p></li>
<li><p>The name of the new column that will hold all the <em>values</em>
that <em>used</em> to be held by the columns we’re eliminating. So, our
population, life expectancy, and GDP data in this case. We’ll call this
new column <code>Value</code>, and we’ll provide this input to the
<code>values_to</code> <em>parameter</em>.</p></li>
<li><p>The name of the new “key” column that will clarify which
statistic is being held in the <code>Value</code> column in a given row.
We’ll call this new column <code>Statistic</code>, and we’ll provide
this input to the <code>names_to</code> parameter.</p></li>
</ol><p>Let’s put all this together and see what it looks like!</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_longer</span> <span class="op">=</span> <span class="va">gap</span> <span class="op">%&gt;%</span> <span class="co">#Review the dplyr lesson if you forget how to use pipes!</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="va">pop</span>, <span class="va">lifeExp</span>, <span class="va">gdpPercap</span><span class="op">)</span>, <span class="co">#We have to use c() here to bundle the column names together because these three columns are not consecutive.</span></span>
<span>               values_to <span class="op">=</span> <span class="st">"Value"</span>, <span class="co">#Notice the quotation marks--these are essential here!</span></span>
<span>               names_to <span class="op">=</span> <span class="st">"Statistic"</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">gap_longer</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 5
  country      year continent Statistic     Value
  &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;
1 Afghanistan  1952 Asia      pop       8425333  
2 Afghanistan  1952 Asia      lifeExp        28.8
3 Afghanistan  1952 Asia      gdpPercap     779. 
4 Afghanistan  1957 Asia      pop       9240934  
5 Afghanistan  1957 Asia      lifeExp        30.3
6 Afghanistan  1957 Asia      gdpPercap     821. </code></pre>
</div>
<p>The first thing I want you to notice (by looking over in the
‘Environment Pane’) is that our new data set, <code>gap_longer</code> is
indeed much longer than before: it’s now up to <code>5112</code> rows!
It also has fewer columns: 5 instead of the 6 we started with.</p>
<div id="challenge3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge3"></a>
</h3>
<div class="callout-content">
<p>The other important thing to notice here is the contents of the
<code>Statistic</code> column. Where did R get this column’s contents
from?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>It used the names of the old columns, the ones we got rid of! It
figures if those names were good enough to serve as column names in the
original data, they must be good enough to be “keys” in this new
organization too!</p>
</div>
</div>
</div>
</div>
</section><section id="pivot_wider"><h2 class="section-heading">PIVOT_WIDER<a class="anchor" aria-label="anchor" href="#pivot_wider"></a>
</h2>
<hr class="half-width"><p>Now, we’ll go the other way–we’ll make our gapminder data set wider
than it already is. We’ll make a data set that has a single row for each
<code>country</code> (countries will be our groups) and we’ll have a
different column for every <code>year</code> x “Statistic” combo we have
for each country.</p>
<p>The <code>tidyr</code> verb that corresponds with this goal is
<code>pivot_wider()</code>, and it works very similarly to
<code>pivot_longer()</code>. Besides our data frame (first input), we’ll
provide <code>pivot_wider()</code> two more inputs:</p>
<ol style="list-style-type: decimal"><li>The column(s) that we’re going to eliminate by spreading their
contents out over several new columns. In our new, wider data set, we’re
going to have a column for each <code>year</code> x “Statistic”
combination, so we’re going to eliminate the current <code>pop</code>,
<code>lifeExp</code>, and <code>gdpPercap</code> columns as we know them
(though their names will get used to make the names for the new columns
we’re creating). We’ll provide them to the <code>values_from</code>
<em>parameter</em>.</li>
<li>The column that we’re going to eliminate by instead inserting it
into the names of the new columns we’re creating. Here, that’s going to
be the <code>year</code> column (I promise this’ll make more sense when
you see it!). We’ll provide this to the <code>names_from</code>
<em>parameter</em>.</li>
</ol><p>Let’s see what this looks like!</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wider</span> <span class="op">=</span> <span class="va">gap</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>values_from <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="va">pop</span>, <span class="va">lifeExp</span>, <span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              names_from <span class="op">=</span> <span class="va">year</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">gap_wider</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 38
  country     continent pop_1952 pop_1957 pop_1962 pop_1967 pop_1972 pop_1977
  &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 Afghanistan Asia       8425333  9240934 10267083 11537966 13079460 14880372
2 Albania     Europe     1282697  1476505  1728137  1984060  2263554  2509048
3 Algeria     Africa     9279525 10270856 11000948 12760499 14760787 17152804
4 Angola      Africa     4232095  4561361  4826015  5247469  5894858  6162675
5 Argentina   Americas  17876956 19610538 21283783 22934225 24779799 26983828
6 Australia   Oceania    8691212  9712569 10794968 11872264 13177000 14074100
# ℹ 30 more variables: pop_1982 &lt;dbl&gt;, pop_1987 &lt;dbl&gt;, pop_1992 &lt;dbl&gt;,
#   pop_1997 &lt;dbl&gt;, pop_2002 &lt;dbl&gt;, pop_2007 &lt;dbl&gt;, lifeExp_1952 &lt;dbl&gt;,
#   lifeExp_1957 &lt;dbl&gt;, lifeExp_1962 &lt;dbl&gt;, lifeExp_1967 &lt;dbl&gt;,
#   lifeExp_1972 &lt;dbl&gt;, lifeExp_1977 &lt;dbl&gt;, lifeExp_1982 &lt;dbl&gt;,
#   lifeExp_1987 &lt;dbl&gt;, lifeExp_1992 &lt;dbl&gt;, lifeExp_1997 &lt;dbl&gt;,
#   lifeExp_2002 &lt;dbl&gt;, lifeExp_2007 &lt;dbl&gt;, gdpPercap_1952 &lt;dbl&gt;,
#   gdpPercap_1957 &lt;dbl&gt;, gdpPercap_1962 &lt;dbl&gt;, gdpPercap_1967 &lt;dbl&gt;, …</code></pre>
</div>
<p>As the name correctly suggests, <code>gap_wider</code> is indeed much
wider than our original gapminder data set: It has 38 columns instead of
the original 6. We also have fewer rows: Just 142 (1 per
<code>country</code>) compared to the original 1704.</p>
<p>Importantly, our new columns have intuitive, predictable names:
<code>gdpPercap_1972</code>, <code>pop_1992</code>, and
<code>lifeExp1987</code>, for example. Hopefully this is making more
sense now that you’ve seen it in action!</p>
<div id="challenge4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge4"></a>
</h3>
<div class="callout-content">
<p>You’ve now seen <code>pivot_longer()</code> and
<code>pivot_wider()</code>. Maybe you’ve noticed that they seem like
“opposites?” They are! <em>They’re designed to “undo” the other’s
work</em>, in fact!</p>
<p>So, use <code>pivot_wider()</code> to “rewind”
<code>gap_longer</code> back to the organization of our original data
set.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>This task is thankfully <em>relatively</em> easy. We tell R that it
should pull the names for the new columns in our wider table from the
<code>Statistic</code> column, then pull the values for those new
columns from the old <code>Value</code> column:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_returned1</span> <span class="op">=</span> <span class="va">gap_longer</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Statistic</span>,</span>
<span>              values_from <span class="op">=</span> <span class="va">Value</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">gap_returned1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 6
  country      year continent      pop lifeExp gdpPercap
  &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
1 Afghanistan  1952 Asia       8425333    28.8      779.
2 Afghanistan  1957 Asia       9240934    30.3      821.
3 Afghanistan  1962 Asia      10267083    32.0      853.
4 Afghanistan  1967 Asia      11537966    34.0      836.
5 Afghanistan  1972 Asia      13079460    36.1      740.
6 Afghanistan  1977 Asia      14880372    38.4      786.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge5"></a>
</h3>
<div class="callout-content">
<p>Now, use <code>pivot_longer()</code> to “rewind”
<code>gap_wider</code> back to the organization of the original data
set. This transformation will be a <em>little</em> more complicated,
though; you’ll need to specify slightly different inputs:</p>
<ol style="list-style-type: decimal"><li>For the <code>names_to</code> <em>parameter</em>, specify exactly
<code>c(".value", "year")</code>. <code>".value"</code> is a special
input value here that has a particular meaning–see if you can guess what
it is! You can use <code>?pivot_longer()</code> to research the answer,
if you’d like.</li>
<li>You’ll also need to specify <code>"_"</code> as an input for the
<code>names_sep</code> <em>parameter</em>. See if you can guess
why.</li>
<li>Lastly, you won’t be needing to specify anything for the
<code>values_to</code> parameter this time–<code>".value"</code> is
taking care of the need to put anything there.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Here’s how we’d use <code>pivot_longer()</code> to “rewind” to our
original data set:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_returned2</span> <span class="op">=</span> <span class="va">gap_wider</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="va">pop_1952</span><span class="op">:</span><span class="va">gdpPercap_2007</span>,</span>
<span>               names_to <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">".value"</span>, <span class="st">"year"</span><span class="op">)</span>,</span>
<span>               names_sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">gap_returned2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 6
  country     continent year       pop lifeExp gdpPercap
  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
1 Afghanistan Asia      1952   8425333    28.8      779.
2 Afghanistan Asia      1957   9240934    30.3      821.
3 Afghanistan Asia      1962  10267083    32.0      853.
4 Afghanistan Asia      1967  11537966    34.0      836.
5 Afghanistan Asia      1972  13079460    36.1      740.
6 Afghanistan Asia      1977  14880372    38.4      786.</code></pre>
</div>
<p>Our inputs for <code>names_to</code> were first telling R “the names
of the new columns should come from the <em>first</em> parts of the
names of the columns we’re getting rid of.” That was the
<code>".values"</code> bit!</p>
<p>Then, they were telling R “the other column you should make should
simply be called <code>year</code>.”</p>
<p>Lastly, by saying <code>names_sep = "_"</code>, we were indicating
that R should hack apart the old column names at the underscores (aka
<em>separate</em> the old names at the <code>_</code>) to find the
proper bits to use in the new column names.</p>
<p>So, R pulled apart the old column names, creating <code>pop</code>,
<code>lifeExp</code>, and <code>gdpPercap</code> columns from the front
halves and then years to fill the new <code>year</code> column from the
back halves of those old column names. Pretty incredible, huh??</p>
<p>Try to rephrase the above explanation in your own words.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Use the <code>tidyr</code> package to reshape the organization of
your data.</li>
<li>Use <code>pivot_longer()</code> to go towards a “longer”
layout.</li>
<li>Use <code>pivot_wider()</code> to go towards a “wider” layout.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/13b-dplyr.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/14-knitr-markdown.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/13b-dplyr.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Data Frame
        </a>
        <a class="chapter-link float-end" href="../instructor/14-knitr-markdown.html" rel="next">
          Next: Producing Reports... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/swcarpentry/r-novice-gapminder/edit/main/episodes/14b-tidyr.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/swcarpentry/r-novice-gapminder/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/r-novice-gapminder/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/r-novice-gapminder/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.5" class="external-link">pegboard (0.7.5)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/r-novice-gapminder/instructor/14b-tidyr.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Pivoting using tidyr",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/r-novice-gapminder/instructor/14b-tidyr.html",
  "identifier": "https://swcarpentry.github.io/r-novice-gapminder/instructor/14b-tidyr.html",
  "dateCreated": "2015-04-18",
  "dateModified": "2024-06-20",
  "datePublished": "2024-06-20"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

